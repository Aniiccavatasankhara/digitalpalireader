<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Digital Pali Reader</title>
<link rel="shortcut icon" href="chrome://digitalpalireader/skin/icons/logo.png">
<link rel="stylesheet" type="text/css" href="css/styles.css">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<script>
var mainWindow = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
				   .getInterface(Components.interfaces.nsIWebNavigation)
				   .QueryInterface(Components.interfaces.nsIDocShellTreeItem)
				   .rootTreeItem
				   .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
				   .getInterface(Components.interfaces.nsIDOMWindow); 
function onDocLoad() {
	getconfig();
	//openDPRSidebar();

	if(/\?/.exec(document.location.href)) {
		 getLinkPlaceBottom();
	}
	document.onkeypress = function(e){
		if(document.activeElement.type == "text" || document.activeElement.tagName == "TEXTAREA" || e.altKey || e.ctrlKey) { return; }
		mainWindow.gBrowser.getBrowserForTab(mainWindow.gBrowser.selectedTab).contentWindow.wrappedJSObject.keyPressed(e);
	};
	showBv();
}

function showBv() {
	var abv = bv();
    document.getElementById('bottom').style.top = (document.getElementById('anf').offsetHeight - 4) + 'px';
	document.getElementById('difb').innerHTML = '<b class="text">Quote of the Moment:</b><p name="changecolor" valign=middle>' + abv[0].replace(/\n/g,'<br/>') + '</p>'+(!abv[1] ? '' : '<p>' + abv[1] +'</p>');
    document.getElementById('cdif').scrollTop=0;
}

function sendTextpadToAnalyze(){
	var text = document.getElementById('pad').value;
	mainWindow.gBrowser.getBrowserForTab(mainWindow.gBrowser.selectedTab).contentDocument.getElementById('dpr-index-top').contentWindow.wrappedJSObject.analyzeTextPad(text);
}

</script>
<script language="JavaScript1.3" type="text/javascript" src="js/io.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/prefload.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/receive_bottom.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/config.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/translit.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/navigation.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/format.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/chrome.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/bv.js"></script>

</head>


<body onload="onDocLoad();">
<div id="content">
	<div id="anf" align=right class="chromeback">
		<div id="brtop"></div>
		<div id="brmid"></div>
		<div id="brbot"></div>
		<div id="anft">
			<div align="center" id="anfa"></div>
			<div align="center" id="anfb"></div>
			<div style="position:relative">
				<div id="anfs"></div>
				<div id="anfsd"></div>
			</div>
		</div>
		
	</div>

	<div id="bottom">
		<div id="difout">
			<div id="cdif">
				<div id="dif" class="paperback">
					<div id="difb">
					</div>
				</div>
			</div>
			<div id="difhist" class="hoverShow"></div>
		</div>
		<div id="cof" class="paperback">
			<form name="convertor">
				<table align="center">
					<tr>
						<td align="center">Input</td>
						<td></td>
						<td align="center">Output</td>
					</tr>
					<tr>
						<td align=left id="inputtd">
							<textarea id="inputc" rows="8" cols="35" onkeyup="convert()"></textarea>
						</td>
						<td valign="top">	
							<table id="table1">
								<tr>
									<td align="center">from</td>
									<td></td>
									<td align="center">to</td>
								</tr>
								<tr>
									<td align="center" valign="top">
										<select name="conversion1" onclick="changeConversion(this.selectedIndex,1)">
											<option>Unicode</option>
											<option selected>Velthuis</option>
										</select>
									</td>
									<td></td>
									<td align="center" valign="top">
										<select name="conversion2" onclick="changeConversion(this.selectedIndex,2)">
											<option selected>Unicode</option>
											<option>Velthuis</option>
											<option>Thai</option>
											<option>Devanagari</option>
											<option>Myanmar</option>
											<option>Sinhala</option>
										</select>
									</td>
								</tr>
								<tr>
									<td class="buttont" align="center" colspan="3">
										<span class="abut obut" title="convert the text" onClick="convert()">convert</span> 
									</td>
								</tr>
								<tr>
									<td class="buttont" align="center" colspan="3">
										<span class="abut obut" title="sort words in by pali alphabetical order" onClick="document.convertor.outputc.value=sortaz(document.convertor.inputc.value.replace(/\n/g,' ').replace(/\r/g,' ').split(' ')).join('\n');">sort</span>
									</td>
								</tr>
								<tr>
									<td class="buttont" align="center" colspan="3">
										<span class="abut obut" title="Clear both text boxes" onClick="clearboth()">clear</span>
									</td>
								</tr>
							</table>
						</td>
						<td align=right><textarea name="outputc" rows="8" cols="35"></textarea>
						</td>
					</tr>
				</table>
				<div align="center">Use the "s" key to send a selection or entire section to this convertor.</div>
			</form>
		</div>
		<div id="scf" class="paperback" align=center>
			<form name="textpad">
			<table><tr><td colspan=2><textarea name="pad" id="pad" rows="9" cols="110"></textarea></td></tr></table>
			<p><span class="abut lbut" onclick="clearPad()" title="Erase all text">Clear</span><span class="abut rbut" title="analyze text as Pali passage" onclick="sendTextpadToAnalyze()">Analyze</span>&nbsp;&nbsp; <span class="abut obut" title="save data as file" onclick="savePad()">Save to:</span>&nbsp;Desktop/<input type="text" title="enter location and name of file (seperate folders with '/' or '\') name="file"></p>
			</form>
		</div>
		<div id="tbContainer" class="hoverShow chromeback" onmouseover="document.getElementById('tbOpener').style.display='none'; document.getElementById('tbContainer2').style.display='block';" onmouseout="document.getElementById('tbOpener').style.display='block'; document.getElementById('tbContainer2').style.display='none';">
			<div id="tbOpener" class="tiny">âš™</div>
			<div id="tbContainer2">
				<div id="mainToolbar" class="obutc">
					<span id="difoutM" class="abut lbut sbut tiny" title="Show Dictionary Frame (d)" onclick="moveframey('cdif')">D</span><span id="cofM" class="abut mbut tiny" title="Show Convertor Frame (c)" onclick="moveframey('cof')">C</span><span id="scfM" class="abut rbut tiny"  title="Show Textpad Frame (t)" onclick="moveframey('scf')">T</span>
				</div>
				<div id="auxToolbar" class="obutc"></div>
			</div>
		</div>	
	</div>
	<div id="alertc"><span id="alert"></span></div>
</div>

<script language="JavaScript1.3" type="text/javascript" src="version.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/english.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/convert.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/sortaz.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/dict_xml.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/move.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/ped.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/irreg.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/dppn.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/nameno.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/attlist.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/tiklist.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/titles.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/inflect.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/grammar.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/analysis_declension.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/analysis_arrays.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/analysis_function.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/analysis_output.js"></script>

<script language="JavaScript1.3" type="text/javascript" src="js/listsm.js"></script>
<script language="JavaScript1.3" type="text/javascript" src="js/listam.js"></script>


<script>
	var devCheck = 1;
</script>
<script type="application/x-javascript" src="dev.js"/>
<script>
	devCheck = 1;
	if(!devCheck) {
		function devO() {}
		function dalert(a) {}
		function ddump(a) {}
	}
</script>
</body>
</html>
